language: minimal
if: head_branch = v1.1beta_oci_spec_update OR branch = v1.1beta_oci_spec

services:
  - docker
  
before_install:

script:
   - cd ./spec/agent && docker build -t enterriseconnect/agent:v1.1beta --build-arg EC_REV_V1_1BETA=${EC_REV_V1_1BETA} .
   - echo ${DOCKER_PASSWORD} | docker login -u ${DOCKER_USERNAME} --password-stdin
   - docker push enterriseconnect/v1.1beta
   
after_deploy:

notifications:  
  email:  
    recipients:  
    - ec-research@ge.com
    - prasad.alokam@ge.com
    - Simran.Choudhary@ge.com
    - Sheshank.Gujjari@ge.com
    on_success: always  
    on_failure: always
